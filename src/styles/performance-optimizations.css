/**
 * Consolidated Performance Optimizations CSS
 * 
 * This file combines essential styles from multiple optimization CSS files
 * while eliminating conflicts and redundant rules.
 */

/* ===== GLOBAL OPTIMIZATIONS ===== */

/* Optimize scrolling behavior */
html, body {
  /* Prevent overscroll effects */
  overscroll-behavior: none;
  
  /* Prevent horizontal overflow */
  overflow-x: hidden;
  
  /* Ensure proper width */
  width: 100%;
  
  /* Enable momentum-based scrolling on touch devices */
  -webkit-overflow-scrolling: touch;
}

/* Optimize image rendering */
img {
  /* Use async decoding for all images */
  decoding: async;
  
  /* Ensure smooth transitions */
  transition: opacity 0.2s ease-in-out;
  
  /* Prevent layout shifts during loading */
  aspect-ratio: attr(width) / attr(height);
}

/* Add styles for loaded images */
img[data-img-loaded="true"] {
  opacity: 1 !important;
}

/* Optimize video elements */
video {
  /* Improve video rendering */
  object-fit: cover;
}

/* Optimize scrolling containers */
.overflow-auto,
.overflow-y-auto,
.overflow-x-auto,
.overflow-scroll,
.overflow-y-scroll,
.overflow-x-scroll {
  /* Use momentum-based scrolling on touch devices */
  -webkit-overflow-scrolling: touch;
  
  /* Prevent content from causing layout shifts */
  overscroll-behavior: contain;
}

/* Optimize horizontal scroll containers */
.overflow-x-auto,
.overflow-x-scroll,
.snap-x {
  /* Prevent vertical scrolling */
  overflow-y: hidden;
  
  /* Enable touch-based panning */
  touch-action: pan-x;
}

/* ===== MOBILE-SPECIFIC OPTIMIZATIONS ===== */

@media (max-width: 767px) {
  /* Optimize image rendering on mobile */
  img {
    /* Improve image rendering */
    image-rendering: auto;
  }
  
  /* Apply hardware acceleration only to critical images */
  img.critical-image,
  .hero-section img {
    transform: translateZ(0);
  }
  
  /* Optimize video elements on mobile */
  video {
    /* Ensure proper rendering */
    object-fit: cover;
  }
  
  /* Ensure video has full brightness */
  .hero-section video,
  video.mobile-hero-video,
  .mobile-hero video {
    /* Increase brightness slightly */
    filter: brightness(1.15) !important;
    
    /* Ensure full opacity */
    opacity: 1 !important;
    
    /* Ensure proper z-index */
    z-index: 5 !important;
  }
  
  /* Optimize touch targets */
  button, a, input, select, textarea {
    touch-action: manipulation;
  }
}

/* ===== SCROLLING STATE ===== */

/* Optimize during scrolling */
body.is-scrolling img {
  /* Prevent content visibility changes during scroll */
  content-visibility: auto;
}

/* ===== FONT FALLBACKS ===== */

/* System font fallbacks */
.fonts-failed {
  /* Use system fonts when web fonts fail to load */
  --font-playfair: Georgia, 'Times New Roman', Times, serif !important;
  --font-montserrat: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;
}

/* ===== AUDIO BUTTON ANIMATIONS ===== */

/* Audio button animations */
@keyframes pulse {
  0% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 255, 255, 0.3); }
  50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
  100% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 255, 255, 0.3); }
}

@keyframes ping {
  75%, 100% { transform: scale(1.5); opacity: 0; }
}

/* Audio button styles */
.audio-button {
  position: absolute;
  z-index: 20;
  bottom: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid rgba(255, 255, 255, 0.8);
  box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
  cursor: pointer;
  transition: all 0.3s ease;
}

.audio-button.muted {
  animation: pulse 2s infinite;
}

/* ===== CRITICAL CSS ===== */

/* Critical above-the-fold styles */
.hero-section {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden;
}

.hero-section img,
.hero-section video {
  object-fit: cover;
  width: 100%;
  height: 100%;
}

/* Navigation styles */
.navigation {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 50;
}

/* Mobile navigation */
.mobile-navigation {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 50;
}

/* Logo styles */
.logo {
  position: relative;
  z-index: 10;
}

/* ===== NEXT.JS IMAGE OPTIMIZATIONS ===== */

/* Next.js image container optimizations */
span[style*="box-sizing: border-box; display: block; overflow: hidden"] {
  background-color: #111;
  min-height: 1px;
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

/* Image container styling - prevents layout shifts */
.image-container {
  position: relative;
  background-color: #111;
  overflow: hidden;
}

/* Optimize for touch devices */
@media (pointer: coarse) {
  /* Disable hover effects that might cause jank */
  [class*="hover:"] {
    transition: none !important;
  }
}

/* Optimize animations during scroll */
@media (prefers-reduced-motion: no-preference) {
  .animate-running {
    animation-play-state: running;
  }

  .animate-paused {
    animation-play-state: paused;
  }
}
